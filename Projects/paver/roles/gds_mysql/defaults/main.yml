---
# mandatory parameters
innodb_io_capacity: "{{ innodb_io_capacity_force | default(1000) }}"
innodb_io_capacity_max: "{{ innodb_io_capacity_max_force | default(2000) }}"
innodb_lru_scan_depth: "{{ innodb_lru_scan_depth_force | default(1024) }}"
auto_increment_offset: "{{ auto_increment_offset_force | default(1) }}"

# parameters with good defaults these are only good for FreeBSD and ZFS, these settings mean data loss on Linux.
# Linux support coming soon.
# TODO if multi instance, divide by number of instances
autocommit: "{{ autocommit_force | default(1) }}"
innodb_buffer_pool_size_mb: "{{ innodb_buffer_pool_size_mb_force | default(ansible_memtotal_mb * 0.7) | int }}"
auto_increment_increment: "{{ auto_increment_increment_force | default(2) }}"
binlog_format: "{{ binlog_format_force | default('ROW') }}"
character_set_server: "{{ character_set_server_force | default('utf8') }}"
event_scheduler: "{{ event_scheduler_force | default(0) }}"
expire_logs_days: "{{ expire_logs_days_force | default(14) }}"
key_buffer_size: "{{ key_buffer_size_force | default('32M') }}"
net_buffer_length: "{{ net_buffer_length_force | default('64K') }}"
open_files_limit: "{{ open_files_limit_force | default(65535) }}"
optimizer_switch: "{{ optimizer_switch_force | default('index_merge=on,index_merge_union=on,index_merge_sort_union=on,index_merge_intersection=off') }}"
port: "{{ port_force | default(3306) }}"
read_only: "{{ read_only_force | default(1) }}"
slave_compressed_protocol: "{{ slave_compressed_protocol_force | default(0) }}"
transaction_isolation: "{{ transaction_isolation_force | default('REPEATABLE-READ') }}"
user: "{{ user_force | default('mysql') }}"
log_slave_updates: "{{ log_slave_updates_force | default(1) }}"
long_query_time: "{{ long_query_time_force | default(2) }}"
log_slow_verbosity: "{{ log_slow_verbosity_force | default('full') }}"
log_slow_slave_statements: "{{ log_slow_slave_statements_force | default(0) }}"
log_slow_rate_limit: "{{ log_slow_rate_limit_force | default(1) }}"
log_slow_rate_type: "{{ log_slow_rate_type_force | default('query') }}"
slow_query_log: "{{ slow_query_log_force | default(1) }}"
slow_query_log_use_global_control: "{{ slow_query_log_use_global_control_force | default('long_query_time,log_slow_filter,log_slow_rate_limit,log_slow_verbosity') }}"
slow_query_log_timestamp_always: "{{ slow_query_log_timestamp_always_force | default(1) }}"
max_slowlog_files: "{{ max_slowlog_files_force | default(20) }}"
max_slowlog_size: "{{ max_slowlog_size_force | default('1G') }}"
max_binlog_size: "{{ max_binlog_size_force | default('1G') }}"
max_binlog_files: "{{ max_binlog_files_force | default(100) }}"
userstat: "{{ userstat_force | default(0) }}"
join_buffer_size: "{{ join_buffer_size_force | default('128K') }}"
max_allowed_packet: "{{ max_allowed_packet_force | default('32M') }}"
max_connections: "{{ max_connections_force | default(500) }}"
max_user_connections: "{{ max_user_connections_force| default(480) }}"
max_heap_table_size: "{{ max_heap_table_size_force | default('64M') }}"
query_cache_size: "{{ query_cache_size_force | default(0) }}"
query_cache_type: "{{ query_cache_type_force | default(0) }}"
read_buffer_size: "{{ read_buffer_size_force | default('128K') }}"
read_rnd_buffer_size: "{{ read_rnd_buffer_size_force | default('256K') }}"
sort_buffer_size: "{{ sort_buffer_size_force | default('2M') }}"
table_open_cache: "{{ table_open_cache_force | default(8192) }}"
table_definition_cache: "{{ table_definition_cache_force | default(2000) }}"
table_open_cache_instances: "{{ table_open_cache_instances_force | default(1)  }}"
thread_cache_size: "{{ thread_cache_size_force | default(64) }}"
tmp_table_size: "{{ tmp_table_size_force | default('64M') }}"
innodb_buffer_pool_load_at_startup: "{{ innodb_buffer_pool_load_at_startup_force | default(1) }}"
innodb_buffer_pool_dump_at_shutdown: "{{ innodb_buffer_pool_dump_at_shutdown_force | default(1) }}"
innodb_buffer_pool_instances: "{{ innodb_buffer_pool_instances_force | default(8) }}"
innodb_checksum_algorithm: "{{ innodb_checksum_algorithm_force | default('none') }}"
innodb_log_checksum_algorithm: "{{ innodb_log_checksum_algorithm_force | default('none') }}"
innodb_stats_on_metadata: "{{innodb_stats_on_metadata_force | default(0) }}"
innodb_data_file_path: "{{ innodb_data_file_path_force | default('ibdata1:20M:autoextend') }}"
innodb_fast_shutdown: "{{ innodb_fast_shutdown_force | default(1) }}"
innodb_file_format: "{{ innodb_file_format_force | default('Barracuda') }}"
innodb_file_per_table: "{{ innodb_file_per_table_force | default(1) }}"
innodb_flush_log_at_trx_commit: "{{ innodb_flush_log_at_trx_commit_force | default(2) }}"
innodb_flush_method: "{{ innodb_flush_method_force | default('O_DIRECT_NO_FSYNC') }}"
innodb_flush_neighbors: "{{ innodb_flush_neighbors_force | default(1) }}"
innodb_large_prefix: "{{ innodb_large_prefix_force | default(0) }}"
innodb_lock_wait_timeout: "{{ innodb_lock_wait_timeout_force | default(20) }}"
innodb_log_buffer_size: "{{ innodb_log_buffer_size_force | default('8M') }}"
innodb_log_files_in_group: "{{ innodb_log_files_in_group_force | default(2) }}"
innodb_log_file_size: "{{ innodb_log_file_size_force | default('4G') }}"
innodb_rollback_on_timeout: "{{ innodb_rollback_on_timeout_force | default(1) }}"
innodb_stats_sample_pages: "{{ innodb_stats_sample_pages_force | default(8) }}"
innodb_thread_concurrency: "{{ innodb_thread_concurrency_force | default(0) }}"
innodb_doublewrite: "{{ innodb_doublewrite_force | default(0) }}"
innodb_use_global_flush_log_at_trx_commit: "{{ innodb_use_global_flush_log_at_trx_commit_force | default(1) }}"
innodb_use_sys_malloc: "{{ innodb_use_sys_malloc_force | default(1) }}"
innodb_read_io_threads: "{{ innodb_read_io_threads_force | default(16) }}"
innodb_write_io_threads: "{{ innodb_write_io_threads_force | default(16) }}"
innodb_purge_threads: "{{ innodb_purge_threads_force | default(8) }}"
master_info_repository: "{{ master_info_repository_force | default('TABLE') }}"
relay_log_info_repository: "{{ relay_log_info_repository_force | default('TABLE') }}"
sync_binlog: "{{ sync_binlog_force | default(1) }}"
sync_frm: "{{ sync_frm_force | default(1) }}"
replicate_wild_do_table: "{{ replicate_wild_do_table_force | default([]) }}"
binlog_ignore_db: "{{ binlog_ignore_db_force | default([]) }}"
binlog_do_db: "{{ binlog_do_db_force | default([]) }}"
replicate_ignore_db: "{{ replicate_ignore_db_force | default([]) }}"
replicate_do_db: "{{ replicate_do_db_force | default([]) }}"
replicate_do_table: "{{ replicate_do_table_force | default([]) }}"
replicate_ignore_table: "{{ replicate_ignore_table_force | default([]) }}"
relay_log_purge: "{{ relay_log_purge_force | default(1) }}"
relay_log_recovery: "{{ relay_log_recovery_force | default('ON') }}"
sql_mode: "''"
ft_min_word_len: "{{ ft_min_word_len_force | default(4) }}"
ft_boolean_syntax: "{{ ft_boolean_syntax_force | default('+ -><()~*:\"\"&|') }}"
log_bin_trust_function_creators: "{{ log_bin_trust_function_creators_force | default(0) }}"
group_concat_max_len: "{{ group_concat_max_len_force | default(1024) }}"
innodb_autoinc_lock_mode: "{{ innodb_autoinc_lock_mode_force | default(1) }}"
