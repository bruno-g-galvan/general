<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>RaaS - Elasticache</title>

  <!-- Custom fonts for this template -->
  <link href="../sb-admin-2/vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="../sb-admin-2/css/sb-admin-2.min.css" rel="stylesheet">

  <!-- Custom styles for this page -->
  <link href="../sb-admin-2/vendor/datatables/dataTables.bootstrap4.min.css" rel="stylesheet">

</head>

<body id="page-top">

  <!-- Page Wrapper -->
  <div id="wrapper">

    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">

      <!-- Main Content -->
      <div id="content">

        <!-- Begin Page Content -->
        <div class="container-fluid">

          <!-- Page Heading -->
          <!-- <h1 class="h3 mb-2 text-gray-800">RaaS Elasticache Instances</h1> -->
          <!-- <p class="mb-4">DataTables is a third party plugin that is used to generate the demo table below. For more information about DataTables, please visit the <a target="_blank" href="https://datatables.net">official DataTables documentation</a>.</p> -->

          <div class="card shadow mb-4">
            <div class="card-header py-3">
              <p class="m-0 font-weight-bold text-primary" style="display:inline">RaaS ElastiCache Instances</p>
              <p style="display:inline">
                <span style="padding-left: 200px;"/>
                quick filters:
                  <span style="padding-left: 30px;"/>
                  <a href="javascript:;" onclick="addfilter('prod');">prod</a> |
                  <a href="javascript:;" onclick="addfilter('staging');">staging</a>
                  <span style="padding-left: 30px;"/>
                  <a href="javascript:;" onclick="addfilter('redis');">redis</a> |
                  <a href="javascript:;" onclick="addfilter('memcached');">memcached</a>
                  <span style="padding-left: 30px;"/>
                  <a href="javascript:;" onclick="addfilter('us-west-1');">us-west-1</a> |
                  <a href="javascript:;" onclick="addfilter('us-west-2');">us-west-2</a> |
                  <a href="javascript:;" onclick="addfilter('eu-west-1');">eu-west-1</a>
                  <span style="padding-left: 150px;"/>
                  <a href="?totals">totals</a> | <a href="?instances">instances</a>
              </p>
            </div>
            <div class="card-body">
              <div class="table-responsive">
                <table id="raas_table" class="table table-bordered" width="100%" ></table>
              </div>
            </div>
          </div>

        </div>

      </div>
      <!-- End of Main Content -->

    </div>
    <!-- End of Content Wrapper -->

  </div>
  <!-- End of Page Wrapper -->

  <!-- Bootstrap core JavaScript-->
  <script src="../sb-admin-2/vendor/jquery/jquery.min.js"></script>
  <script src="../sb-admin-2/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Core plugin JavaScript-->
  <script src="../sb-admin-2/vendor/jquery-easing/jquery.easing.min.js"></script>

  <!-- Custom scripts for all pages-->
  <script src="../sb-admin-2/js/sb-admin-2.min.js"></script>

  <!-- Page level plugins -->
  <script src="../sb-admin-2/vendor/datatables/jquery.dataTables.min.js"></script>
  <script src="../sb-admin-2/vendor/datatables/dataTables.bootstrap4.min.js"></script>

  <script src="data/redis_dev_gen_usw1.js?v=ffa6aaa"></script>
  <script src="data/redis_dev_test_usw1.js?v=652a157"></script>
  <script src="data/redis_dev_gen_usw2.js?v=6c7fd7b"></script>
  <script src="data/redis_dev_gen_euw1.js?v=6417858"></script>
  <script src="data/memcached_dev_gen_usw1.js?v=96a8494"></script>
  <script src="data/memcached_dev_gen_usw2.js?v=4ab1e89"></script>
  <script src="data/memcached_dev_gen_euw1.js?v=314c19b"></script>
  <script src="data/redis_staging_gen_euw1.js?v=6c85356"></script>
  <script src="data/redis_staging_gen_usw1.js?v=f9981f3"></script>
  <script src="data/redis_staging_gen_usw2.js?v=87dff2f"></script>
  <script src="data/redis_staging_im_usw1.js?v=1c864b4"></script>
  <script src="data/redis_staging_im_usw2.js?v=1c0ce9a"></script>
  <script src="data/memcached_staging_gen_euw1.js?v=199a541"></script>
<<<<<<< Updated upstream
  <script src="data/memcached_staging_gen_usw1.js?v=0111405"></script>
=======
  <script src="data/memcached_staging_gen_usw1.js?v=0111405"></script>
>>>>>>> Stashed changes
  <script src="data/memcached_staging_gen_usw2.js?v=bf979e0"></script>
=======
  <script src="data/redis_prod_gen_euw1.js?v=b07da0c"></script>
=======
  <script src="data/redis_prod_gen_euw1.js?v=b07da0c"></script>
=======
  <script src="data/redis_prod_gen_euw1.js?v=b07da0c"></script>
=======
  <script src="data/redis_prod_gen_euw1.js?v=b07da0c"></script>
=======
  <script src="data/redis_prod_im_euw1.js?v=9f254cc"></script>
=======
<<<<<<< Updated upstream
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
=======
  <script src="data/redis_prod_gen_usw1.js?v=1c41fec"></script>
>>>>>>> Stashed changes
=======
  <script src="data/redis_prod_im_usw1.js?v=0cbd733"></script>
  <script src="data/redis_prod_gen_usw2.js?v=d77b07b"></script>
  <script src="data/memcached_prod_gen_euw1.js?v=1c5d19c"></script>
  <script src="data/memcached_prod_gen_usw1.js?v=87885a9"></script>

  <script type="text/javascript">
    function addfilter(str) {
      var newstr = $('div.dataTables_filter input').val() + " " + str + " ";
      $('div.dataTables_filter input').val(newstr);
      $('div.dataTables_filter input').keydown();
      $('div.dataTables_filter input').keyup();
      $('div.dataTables_filter input').focus();
    }

    function totalsSet() {
      const rgnmap = {usw1:"us-west-1", usw2:"us-west-2", euw1:"eu-west-1"};
      ret = [];
      for(var s of data_arr_names) {
        js = window[s];
        parts = s.split("_");
        engine = parts[0];
        env = parts[1];
        group = parts[2];
        region = rgnmap[parts[3]];

        var dict = {};
        for(var i of js) {
          num_nodes = (engine == "redis") ? 2*i[8] : i[8];
          dict[i[7]] = (dict[i[7]] === undefined) ? num_nodes : dict[i[7]] + num_nodes;
        }
        a = [];
        for (var type in dict) {
          a = a.concat([[ region, engine, env, group, type, dict[type]]]);
        }
        ret = ret.concat(a);
      }
      return ret;
    }
  </script>

  <script>
    var url_string = window.location.href;
    var url = new URL(url_string);
    var data_arr_names = [
      "redis_dev_gen_usw1",
      "redis_dev_test_usw1",
      "redis_dev_gen_usw2",
      "redis_dev_gen_euw1",
      "memcached_dev_gen_usw1",
      "memcached_dev_gen_usw2",
      "memcached_dev_gen_euw1",
      "redis_staging_gen_euw1",
      "redis_staging_gen_usw1",
      "redis_staging_gen_usw2",
      "redis_staging_im_usw1",
      "redis_staging_im_usw2",
      "memcached_staging_gen_euw1",
      "memcached_staging_gen_usw1",
      "memcached_staging_gen_usw2",
      "redis_prod_gen_euw1",
      "redis_prod_im_euw1",
      "redis_prod_gen_usw1",
      "redis_prod_im_usw1",
      "redis_prod_gen_usw2",
      "memcached_prod_gen_euw1",
      "memcached_prod_gen_usw1",
    ];

    $(document).ready(function() {
        if (url.searchParams.get("totals") != null) {
          $('#raas_table').DataTable( {
              data: totalsSet(),
              columns: [
                { title: "region" },
                { title: "engine" },
                { title: "env" },
                { title: "group" },
                { title: "node type" },
                { title: "nodes" },
              ],
          } );
        } else {
          var dataSet = [];
          for(var s of data_arr_names) {
            dataSet = dataSet.concat(window[s]);
          }
          $('#raas_table').DataTable( {
              data: dataSet,
              columns: [
                { title: "cluster" },
                { title: "region" },
                { title: "engine" },
                { title: "service" },
                { title: "cname (from onprem) port 6379" },
                { title: "alias (from conveyor) port 6379" },
                { title: "jira" },
                { title: "node type" },
                { title: "nodes" },
                { title: "$/mo" },
                { title: "wf" },
                { title: "🔒" },
                { title: "attribs" },
              ],
          } );
        }
        $('div.dataTables_filter input').focus();
        var q = url.searchParams.get("q");
        if (q != null) {
          addfilter(q)
        }
    } );
  </script>

</body>

</html>
